# A3.1 OSS 프로젝트 최종보고서

## I. 프로젝트 수행팀 개요

* 수행 학기: 2024-1
* 프로젝트명: 농작물 생산량 예측 웹서비스  
* Key Words : 농업, 농작물, 예측, 머신러닝, 공시지가
* 팀명: Aha

구분 | 성명 | 학번 | 소속학과 | 연계전공 | 이메일
------|-------|-------|-------|-------|-------
팀장 | 이현종 | 2019111655 | 바이오환경과학과 | 융합SW연계전공 | hjong1010@dongguk.edu         
팀원 | 임형준 | 2019112520 | 산업시스템공학과 | 융합SW연계전공 | 2019112520@dongguk.edu        
팀원 | 이건희 | 2019110475 | 통계학과 | 융합SW연계전공 | ish8176@dgu.ac.kr         

* 지도교수: 융합SW교육원 이길섭 교수님, 박효순 교수님      

## II. 프로젝트  수행 결과

### 1. 프로젝트 개요  
* 기후 변화에 대비하여, 향후 기후 변화에 맞는 농작물 트렌드를 시각화 하여 제시하고자 한다. 예비 농업인과, 농업 종사자를 서비스 주요 대상으로 설정하였으며, 향후 농작물 생산 전망, 토지 비용 등을 직관적인 수치로 제공하여 일반 대중에게도 국내 농업에 대한 관심을 늘릴 수 있는 기회가 되고자 한다.
#### 1.1 개발 동기 및 목적  
* 한국의 농업 실태 : 한국은 농업부분에서 한국인의 주식인 쌀을 포함해 농작물 수입량이 과도하게 많으며 차후 국제적, 경제적 어려움이 생길 수 있다. 본 서비스를 통한 생산량 증대 및 농업의 수요와 접근을 향상시키고자 한다.
* 기후 변화 : 기상청에 따르면 기후변화란, 온실가스, 화석 연료, 태양에너지 변화 등에 의해 해당 지역의 평균적인 날씨 패턴이 변화하는 것을 의미한다. 대한민국 또한 기후 변화가 뚜렷하게 나타나고 있는 상황으로, 경상북도 과수 재배지가 변화하고 있으며, 대나무 서식지는 북상하고 있는 추세이다.
* 미래 대비 솔루션 필요 : 농작물은 기상 환경의 영향을 많이 받기 때문에, 변화하는 미래를 대비하여 농사를 시작할 때 어떤 지역이 적합할지, 현재 지역에는 어떤 농작물이 적합할지에 대한 솔루션이 필요하다.
#### 1.2 필요성  
위에 언급한 미래 문제의 해결에 도움이 되는 서비스를 제공할 예정이다.
#### 1.3 개발 목표  
* 대한민국 지역을 대상으로, 도/광역시에 따른 예측 농작물 생산량을 제공하는 웹 페이지를 개발하고자 한다.
* 생산량 예측은 단위면적 당 생산량(kg/10a) 를 타겟 값으로, 기상 조건들을 독립 변수로 한 Machine Learning 모델을 제작하여 제공할 예정이다.
* 국토 교통부의 공시지가 API를 이용하여 농사를 지을 때 필요한 땅의 가격도 고려할 수 있도록 할 예정이다.
### 2. 최종결과물 소개  

- 농작물 생산량 트렌드 서비스 주소: https://osspcrops.store/
- 시연 영상: https://www.youtube.com/watch?v=pHNJq1oRQkk&ab_channel=%ED%98%95%EC%A4%80%EC%9E%84
* 웹 접속 초기 화면
* 작물,연도 선택란 / 지역 내 특정 위치 클릭 시 팝업창
<img width="620" alt="Aha_map page" src="https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/assets/162420581/71ba659c-5d73-4c96-baca-7ab43cff5998">

 * 메인페이지에 희망 작물, 희망 연도를 선택할 수 있도록 하며 선택 학목에 따른 전국적인 생상량 예측값에 대한 분포를 시각적으로 제공
 * 지도에서 희망 지역 선택시 해당 행정구역의 생산량 예측값 제공하며 위도,경도에 따른 공시지가 정보를 함께 제공

### 3. 프로젝트 추진 내용    

#### 3.1 프로젝트 진행과정    
##### (1) 주제선정
* 각 팀원의 전공을 융합하여 아이디어 도출
* 바이오환경과학과, 통계학과, 산업시스템공학과. 3개의 학과에서 전공에 기반한 아이디어를 제공하여 농작물 생산량 예측 페이지를 주제로 선정
##### (2) 선행기술 분석 
* 농업이 활성화 되었고, 관련 서비스가 다양한 미국을 중심으로 선행기술 분석
* 한국의 농작물 생산량 예측 서비스인 '날씨마루'의 분석
* 보다 구체적이고 시각적인 효과를 줄 수 있고, 올해의 생산량 뿐 아니라 향후 30년간 기후변화에 따른 농작물 생산량 예측 서비스 개발을 목표로 함
##### (3) 프로젝트 설계
* 유스케이스, 블록다이어그램, 시퀀스다이어그램을 작성하여 서비스에 필요한 기능과 구성관계를 설계함
  ![유스케이스](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/assets/162420581/5baf16b1-2e70-400f-9fbf-dc22f9993d69)
  ![블록다이어그램](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/assets/162420581/8a55fb7a-fe9d-4558-988a-d66f09227f62)
  ![시퀀스](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/assets/162420581/af89a518-48d0-490c-a848-d605e6b0e2b5)
* 필요 기술을 파악하고 역할을 분담하여 필요 기술을 습득함
* 프론트엔드, 백앤드, 서버관리로 역할 분담하였음
##### (4) 일정 및 이슈 관리
* Github Issues를 이용해 이슈 관리
* WBS를 작서하여 일정 및 담당역할 관리
##### (5) 프로젝트 개발
* Django를 메인으로 사용하여 웹페이지 제작
* 작물선택, 연도선택, 지역선택의 기능을 구현하고 db의 정보를 이용한 데이터 제공
* 전국적 비교가 가능하도록 시각적 표현 및 상세 데이터 팝업 기능 제공
 ##### (5) 프로젝트 배포
* GCP: 클라우드 인프라 제공
* Django: 웹 애플리케이션 프레임워크
* Gunicorn: WSGI HTTP 서버
* Nginx: 리버스 프록시 및 정적 파일 서버
* Let's Encrypt: 무료 SSL 인증서 제공
![image](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/assets/137899379/dc2879e7-a04c-41a0-983f-57ecd3d27dbe)

#### 3.2 프로젝트 구현과정    
##### (1) [BackEnd_지도구현 이슈](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/issues/24)
**이슈** : 지도 표현 과정에서 위도,경도 정보 제공, 행정구역별 분리, 분리된 구역마다 데이터에 맞는 색깔 표시등 여러 기능이 구현되어야 함. 초기 설계단계에서 계획한 leaflet 에서 기능 구현의 어려움 발생하여 대안 탐색 필요

**해결 방안** :Leflet 기능 구현의 어려움 존재하였으나 추가적인 학습 및 탐색을 통해 알고리즘 새로 작성하여 원하는 기능 구현
기능 구현 가능해지고 시각적인 아쉬움 존재하나 다른 대안에 비해 기능 구현 용이 및 시각화에 가시성도 적결하여 대안으로 채택

##### (2) [BackEnd_기상정보 사용 이슈](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/issues/25)
**이슈** : 지도상 지역에서 기상정보 이용 방법에 대한 방법 논의.
지도 선택시 생산량 예측 모델에 필요한 기상 정보를 사용하여 결과값을 즉각 도출 할 수 있도록 기능.

최초 설계 시 계획했던 OepnApi를 이용한 지난해 연간 종합 기상정보 활용하고자 하였으나 데이터 활용에 제한사항이 존재하여 대안 탐색 필요.
어떤 데이터를 어떤 방식으로 사용할지에 대한 여러 방법, 대안이 존재.

**해결 방안** : 기후변화시나리오 및 DB 사용.

기후변화 시나리오에 맞는 기후예측값을 이용하며 DB를 구축하여 필요한 정보만 사용 가능토록 하며 오버헤드 관리 및 데이터 유지보수에 용이성 확보 가능. 기상청 등 필요한 정보를 직접 수집하고 활용 가능하며 관리자가 지속적인 관리 및 업데이트가 가능하여 대안으로 채택

* 선행기술 '날씨마루'와의 차이점 
  ![image](https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09/assets/143998370/f590da9d-1e05-48ca-87d7-fb9b0f493f63)

* AS_IS
  * Papers
    * [1]"작물 생산량 예측을 위한 머신러닝 기법 활용 연구"에서는 스마트 팜에서 제공하는 여러가지 데이터 중 63개 데이터를 선정하여, 가장 중요한 세 가지 요인을 선정하였다.

    * [2]"기후변화가 벼의 생산량에 미치는 영향", [3]"기상요소가 식량작물 생산량에 미치는 영향: 패널자료를 활용한 회귀분석"에서는 기온, 강수량, 일조시간 등 기후와 벼 생산량의 관계를 분석하였다.

  *Patents
    * [4]"위성 영상을 이용한 작물 생산량 예측장치", [5]"인공신경망 및 선형 회귀를 이용한 작물 생산량 예측 방법" 과 같은 유사 특허가 존재한다.
    * 본 프로젝트에서는 기존의 모델을 사용하는 것이 아니라 자체적으로 작물 생산량 예측 모델을 만들어 사용하고자 한다.
  * Services
    * [6]"기상청 날씨마루" 에서 지역별 농작물 생산량을 예측하는 서비스를 제공한다. 예측된 서비스를 이용해 가격 안정 및 수급을 조절할 수 있도록 한다.

* TO_BE
  * 다음 해의 정확한 농작물 생산량 예측을 위해서는 다음 해의 기상 예측이 선행되어야 하며, 이를 위한 데이터 수집에 많은 비용이 필요하다. 본 서비스에서는 정확한 예측 대신 향후 30년 간 먼 미래의 생산량 트랜드를 제시하고자 한다.
  * 이를 위해 기후 변화 시나리오를 사용하였으며, 기후 변화 시나리오란 기후변화를 전망하기 위해 온실가스 농도, 기후변화 수치모델을 이용하여 산출한 미래기후 전망정보를 말한다.
  * 농경지를 선택하고자 하는 예비 농업인이나, 농경지를 확장하고자 하는 농업인들이 유용하게 사용할 수 있도록, 해당 지역의 토지 공시지가 정보를 포함한다.
  * 사용자는 사용자 친화적인 인터페이스로로 지역, 농작물 별 향후 생산량 트랜드를 쉽게 조회할 수 있다.

### 4. 기대효과  
* 경제적 측면
  1. 생산 효율성 향상 : 농부들이 생산량 예측을 통해 재배 계획을 세울 수 있어 자원의 효율적 활용과 생산성을 높일 수 있음.
  2. 재고 관리 최적화 : 예측된 생산량을 바탕으로 적절한 재고 관리가 가능함.
  3. 시장 가격 안정화 : 농작물 생산량을 예측함으로써 시장의 공급 과잉 또는 부족을 예방할 수 있음.
* 사회적 측면
  1. 식량 안보 강화 : 수입 없이 국내에서만 농작물의 안정적 공급이 가능해져 식량 안보 강화 가능.
  2. 농업 정책 지원 : 정확한 데이터를 바탕으로 정부가 농업 정책을 수립하고, 지원 프로그램을 개발하도록 함.
  3. 환경 보호 : 필요한 자원을 정확히 에측하고 사용하여 과도한 비료 사용을 줄이고, 물과 에너지 자원을 절약할 수 있음.

### 5. 팀원 역할    

구분 | 성명 | 팀내 역할 
:----:|:-----:|-------
팀장 | 이현종 | 프론트엔드 
팀원 | 임형준 | ML모델 학습, 배포        
팀원 | 이건희 | 백엔드        

### 6. 참고문헌  
[1] 김세원, 김영희. (2021). 작물 생산량 예측을 위한 머신러닝 기법 활용 연구. 한국산학기술학회 논문지, 22(7), 403-408, 10.5762/KAIS.2021.22.7.403

[2] 이윤선, 이승호. (2008). 기후변화가 벼의 생산량에 미치는 영향. 국토지리학회지, 42(3), 405-416.

[3] 기상요소가 식량작물 생산량에 미치는 영향: 패널자료를 활용한 회귀분석

[4]"위성 영상을 이용한 작물 생산량 예측장치

[5] 인공신경망 및 선형 회귀를 이용한 작물 생산량 예측 방법

[6] 날씨마루 https://bd.kma.go.kr/kma2020/fs/productionSelect1.do?pageNum=5&menuCd=F050102000  

### 7. 프로젝트 성과    

* Guthub : https://github.com/CSID-DGU/2024-1-OSSProj-Aha-09

### 7. 첨부  

1. OSS 프로젝트 결과보고서 (요약)  
    * 별도 제공된 양식에 작성 후 제출(pdf 형식)  
2. OSS 프로젝트 참여확인서  
    * 별도 제공된 양식에 작성 및 참여자 서명 후 제출(pdf 형식)    
3. 팀구성원이 함께 찍은 사진 1장  
    * jpg파일 별도제출(파일명: eg. Tnn_팀명_팀사진.jpg)  
4. 작품설명용 사진 1~2장  
    * jpg파일 별도 제출(파일명: eg. Tnn_팀명_4_개념설계.jpg)  

